<%= render "layouts/navbar_home" %>

<div class="container">
  <% if logged_in? %>
    <%= render "questions/upload" %>
  <% else %>
    <%= render "questions/unupload" %>
  <% end %>

  <div class="w-100"> 
    <div class="col-xl-8 p-0 mb-5 float-l">
      <h1 class="reverse-color top-messages-title">メッセージ一覧</h1>
      
      <% @questions.each do |question| %>
        <div class="frame">
          <ul class="list-unstyled word-table">
            <li class="toppage-question-title"><h5><%= link_to question.title, question_path(question), class: "link-color" %></h5></li>
            <li class="toppage-question-content">
              <%= truncate(question.content, length: 100, omission: ' ') do %>
                <%= link_to "続きを読む…", question_path(question) %>
              <% end %>
            </li>
          </ul>
        </div>
      <% end %>
      
      <%= paginate @questions, window: 2 %>
    </div>

    <aside class="col-xl-3 offset-xl-1 frame p-0 mb-5 position-r float-r">
      <h1 class="reverse-color text-center">お知らせ</h1>
      <% @microposts.each do |micropost| %>
        <div class="top-micropost-block">
          <div class="top-micropost-title word-table">
            <%= link_to micropost.title, micropost_path(micropost), class: "link-color" %>
          </div> 
          <div class="top-micropost-content word-table">
            <%= truncate(micropost.content, length: 100, omission: ' ') do %>
              <%= link_to "続きを読む…", micropost_path(micropost) %>
            <% end %>
          </div>
        </div>
      <% end %>
      <div class="micropost-bottom">
        <%= link_to news_path, class: "micropost-bottom" do %>
          <p style="font-size: 20px">一覧へ <span style="font-size: 16px">(<%= @count_micropost %>件)</span></p>
        <% end %>
      </div>
    </aside>
    
    <div class="clear"></div>    
  </div>
</div>
